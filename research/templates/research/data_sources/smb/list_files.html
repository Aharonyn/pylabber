{% extends 'base.html' %} 

{% block content %}

    <h4>
        Remote Resources
    </h4>

    <hr>

    <a href="{% url 'smb:create' %}"><button class="btn btn-sm">Add</button></a>

    <a id="syncLink" href="#"><button id="syncButton" class="btn btn-sm" disabled >Sync</button></a>

    <div id="treeView"></div>



{% endblock content %}

{% block extra-scripts %} 
    <script>
        $(function() {
            // Create lazy loading tree
            $('#treeView').jstree({
                'core' : {
                'data' : {
                    "url" : "{% url 'smb:lazy_json' %}",
                    "data" : function (node) {
                        return { "id" : node.id };
                    }                
                }
                }

            // Disable sync button if nothing selected
            }).on('changed.jstree', function (e, data) {
                    if (data.selected.length > 0) {
                        $('#syncButton').prop('disabled', false);
                    } else {
                        $('#syncButton').prop('disabled', true);
                    }
                });
            });
    </script>
{% endblock extra-scripts %}
